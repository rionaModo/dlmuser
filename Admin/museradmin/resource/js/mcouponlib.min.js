function circleLamp(t){for(var n,o,e=t.radius,s=t.fix,a=t.amount,i=Math.sin,c=Math.cos,r=[],l=0;a>l;l++)o=l/a*2*Math.PI,n={left:e*i(o),top:e*c(o)},s&&(n=s(n)),r.push(n);return $.map(r,function(t){return'<div class="lamp" style="left:'+t.left+"px;top:"+t.top+'px;"></div>'}).join("")}function randomPick(t){return t[Math.floor(Math.random()*t.length)]}function showCoupon(t){t/=100,layer.open({type:1,title:!1,closeBtn:0,area:["450px"],shadeClose:!1,shade:[.5,"#000"],scrollbar:!1,content:'<div class="couponshow"><div class="wrap"><div class="coupon"><div class="amount"></div></div><a href="javascript:" class="btn_ok"></a></div></div>',success:function(n,o){n.css({background:"none","box-shadow":"none"}),n.find(".amount").html(t+"元"),n.find(".btn_ok").click(function(){layer.close(o)})}})}function countCouponList(t){var n=0;return $.isArray(t)&&$.each(t,function(t,o){n+=o.couponAmt}),n}function popup(t){layer.open({type:1,title:!1,closeBtn:0,area:["285px","281px"],shadeClose:!1,shade:[.5,"#000"],scrollbar:!1,content:'<div class="popup"><div class="text"></div><a href="javascript:" class="close"></a></div>',success:function(n,o){n.css({background:"none","box-shadow":"none"}),n.find(".close").click(function(){layer.close(o)}),n.find(".text").text(t)}})}function showThankyou(){layer.open({type:1,title:!1,closeBtn:0,area:["195px","363px"],shadeClose:!1,shade:[.5,"#000"],scrollbar:!1,content:'<div class="thankyou"><a href="javascript:" class="close"></a></div>',success:function(t,n){t.css({background:"none","box-shadow":"none"}),t.find(".close").click(function(){layer.close(n)})}})}function loadAwardList(t,n,o){function e(){$.get(r,n,function(t){return t.status?setTimeout(e,6e4):(l=t.data,s(),void(l.size<o&&setTimeout(e,5e3)))})}function s(){var t="";$.each(l,function(n,o){var e=o.name||"**********",s=o.tel||"**********",a=o.couponAmt/100;t+='<div class="row'+(n%2==1?" even":"")+'"><div class="col">'+e.substr(0,2)+"*****"+e.substr(-1,1)+'</div><div class="col">'+s.substr(0,3)+"****"+s.substr(-1,4)+'</div><div class="col">'+a+"元红包</div></div>"}),c.html(t),l.length>4&&!a&&(a=!0,i.find(".list-wrap").scrollbox({linear:!0,step:1,delay:0,speed:50,listElement:".list",listItemElement:".row"}))}var n=n||{};n.t=Date.now();var a,i=$(t),c=i.find(".list"),r="/router/activity/award_list",l=[],o=o||30;e()}Date.now||(Date.now=function(){return(new Date).getTime()}),function(){function t(t,n,o){this._laps=t,this._gap=n,this.frequency=o||1e3,this._thread=void 0}t.prototype.start=function(){function t(){o.removeClass("on"),$.each(o,function(t){var n=t%e;n===a&&$(this).addClass("on")}),a=(a+1)%e,n()}function n(){s._thread=setTimeout(t,s.frequency)}var o=this._laps,e=this._gap,s=this,a=0;t()},t.prototype.stop=function(){clearTimeout(this._thread)},t.prototype.restart=function(t){this.stop(),this.frequency=t,this.start()},$.fn.flash=function(n,o){var e=$(".lamp",this);e.each(function(t){$(this).addClass(n[t%n.length])});var s=new t(e,n.length,o);return s.start(),s}}(),$.fn.timebar=function(t,n){function o(){return s(t--),0>t?void("function"==typeof n&&n()):void e()}function e(){setTimeout(o,1e3)}function s(t){0>t&&(t=0);var n=t%60,o=Math.floor(t/60)%60,e=Math.floor(t/3600),s=$.map([e,o,n],function(t){return a(t)}).join("").split("");$.each(s,function(t,n){$(i.get(t)).text(n)})}function a(t){var n=t+"";return n.length>2&&(n="99"),n.length<2&&(n="0"+n),n}t=Math.floor(t/1e3);var i=$(".time-item",this);e()};